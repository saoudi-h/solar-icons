import metadata from '@solar-icons/core/metadata.json' assert { type: 'json' }
import fs from 'node:fs'

const toPascalCase = (str: string) =>
    str
        .split('-')
        .map(word => word.charAt(0).toUpperCase() + word.slice(1))
        .join('')

const outputUtilsFilePath = './core/generated/utils.ts'

const generateIcons = (metadata: any) => {
    let utils = `/* Generated by core/scripts/generate-data.ts */

export const styles = ['Broken', 'Outline', 'Linear', 'Bold', 'LineDuotone', 'BoldDuotone'] as const
export type Style = (typeof styles)[number] 

`
    const categories = Object.keys(metadata.categories)
    utils += `export const categories = ${JSON.stringify(categories)} as const\n`
    utils += 'export type Category = typeof categories[number]'

    return { utils }
}

const main = async () => {
    try {
        const { utils } = generateIcons(metadata)
        console.log('The file core/generated/utils.ts has been generated with success !')
        fs.writeFileSync(outputUtilsFilePath, utils)
    } catch (error) {
        console.error('Error while generating the file:', error)
    }
}

main()
