name: 'Install'
description: 'Sets up Node.js and runs install'
inputs:
    node-version:
        description: 'Version de Node.js'
        required: false 
        default: ''
runs:
    using: composite
    steps:
        - name: Read Node.js version from .nvmrc
          id: nvmrc
          shell: bash
          run: echo "NODE_VERSION=$(cat .nvmrc)" >> $GITHUB_OUTPUT

        - name: Install dependencies
          uses: pnpm/action-setup@v4

        - name: Set up Node.js
          uses: actions/setup-node@v4
          with:
              node-version: ${{ steps.nvmrc.outputs.NODE_VERSION }}
              registry-url: 'https://registry.npmjs.org'
              cache: 'pnpm'

        - name: Setup Git User
          shell: bash
          run: |
              git config --global user.email "saoudihakim@gmail.com"
              git config --global user.name "Hakim Saoudi"

        - name: Install dependencies
          shell: bash
          run: pnpm install